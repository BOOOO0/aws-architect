# AWS Korea 실강

1일차 메모 두서없이 일단 정리

## AWS 사용 이점은?

엔터프라이즈급 기업에서 온 프레미스로 서버를 추가 구축하면 수개월이 걸린다.

이 과정을 분 단위로 단축시킬 수 있다.

이후 추가 구축한 리소스가 필요하지 않을 때의 처리도 용이하다.

보안을 외주로 맡길 수 있다.

## AWS Global Infra는 어떻게 이루어져 있나

가용 영역은 데이터 센터의 묶음 최소 3개의 데이터 센터

리전은 가용 영역의 묶음 가용 영역은 a~d 까지 존재할 수 있음

리전 내의 데이터 센터는 내결함성을 갖추고 있으며 서로 거리를 두고 프라이빗 링크로 연결되어 있다.

이유는 고가용성을 달성하기 위해서 자연재해, 정치적 문제 등에 의해 전체 리전이 사용불가 상태가 되는 것을 방지

**_ 상파울루 리전의 경우 자체 발전기 사용해서 데이터센터를 유지한다. 전력 비용 측면에서도 AWS 사용이 이점이 있다. _**

## Local Zone & 엣지 로케이션

리전으로부터 너무 먼 경우 리전과 고속 케이블로 연결된 별도의 센터인 로컬존에 연결할 수 있다.

짧은 지연 시간을 얻지만 모든 서비스를 사용할 수는 없다.

엣지 로케이션 각 주요 도시에서 운영되며 Route 53, CloudFront 같은 서비스를 지원

CDN을 가능케한다.

엣지 로케이션에 캐시 데이터를 저장해서 더 빠르게 접근할 수 있도록 한다.

Local Zone은 EC2, RDS 등 리소스를 더 빠르게 접근하기 위해 사용

엣지 로케이션은 데이터 캐싱, 더 빠른 콘텐츠

Well Architected Framework에서 구축한 아키텍처를 자가점검할 수 있다.

AWS는 REST API를 통해 사용자에게 AWS 콘솔, AWS CLI, AWS SDK를 통한 리소스 생성, 관리를 가능하게 한다.

API 기반의 퍼블릭 클라우드

3개의 가용 영역에 복사되어서 올라간다 s3에 이미지 올리면

`aws s3 mb [버킷명]`

`aws s3 cp [From path] [To Path]`

`aws s3 ls` - 버킷 들의 리스트

`aws s3 ls [버킷명]` - 버킷 내 파일들의 리스트

## 계정 보안

- 인가된 사용자만 접근할 수 있도록 계정을 생성하고 권한을 부여

### AWS 서비스의 구성 방식

- API 요청이 들어오면 인증 -> 인가를 거친다. 그 후 리소스에 대한 요청을 처리하고 응답을 보낸다.

- 인증은 ID/PASSWD, 인가는 권한의 확인으로 두 과정 모두 IAM이 수행한다.

- root 계정 미사용은 AWS측 모범 사례가 맞음

- 정책은 권한을 담은 JSON 형식의 스크립트

- 그 정책을 사용자에게 적용

- 혹은 사용자 그룹에 적용한 후 그룹에 사람을 추가해서 적용되도록 하는 것이 조금 더 나은 선택

- 한 사용자가 여러 그룹에 속해서 많은 권한을 가질 수도 있다.

- 역할(Role)은 정책이 부여된 리소스로 사용 가능한 사용자를 기록해두고 Role이 적용된 사용자는 그 Role의 정책을 가진다.

- 그 후 Role과의 연결을 해제하면 본래 부여받은 정책을 다시 적용받는다.

- 역할을 수임한다. assuming a role

- 보안의 주체는 어떤 작업을 수행할 수 있는 모든 대상

- 서비스가 서비스에 명령을 내릴 경우 EC2에서 S3에 AWS CLI로 접근하는 경우 EC2가 S3에 명령을 내리는 것이므로 EC2는 보안의 주체

- 그 외 계정 등

- AWS ACCESS KEY , AWS SECRET ACCESS KEY - ACCESS KEY는 Public 키 처럼 공개되어도 괜찮다. 복호화 키이자 Private Key 역할을 하는 키는 SECRET ACCESS KEY

- KEY는 aws cli 디렉토리 내 credentials_allowed에 평문으로 저장되어 있기 때문에 노트북 분실 시 Deactivate 해야 한다.

- 정책은 커스텀이던 AWS 제공 정책이던 동등하다.

- 개인을 위한 역할을 생성해서 그 역할을 적용시키는 것이 가장 안전한 방법이긴 하다.

- 이유는 그룹도 잘못 지정해서 권한없는 사용자가 Admin 그룹의 권한을 얻게 되는 경우 위험할 수도 있으니까

- IAM 역할 동작 방식은 API 요청을 보내면 AWS STS가 토큰 생성해서 임시 권한 부여

- 정책은 권한의 부여 뿐만 아니라 최대 권한 설정해서 이후 권한 부여에 대한 경계를 설정할 수도 있다.

- 정책은 주로 권한 부여의 목적으로 쓰이고 위 경계 설정은 프로젝트 초기에 할 수도 있다.

- 자격 증명 기반 정책은 사용자, 그룹, 역할에 적용되고 리소스 기반 정책은 리소스에 적용된다.

- 사용자가 리소스 액세스를 시도하면 리소스 기반 정책을 확인한다? 이건 무슨 얘기인지 모르겠는데 \***\*\*\*\*\***\*\*\*\*\***\*\*\*\*\***

```JSON
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "ec2:Describe*",
                "ec2:GetConsole*"
            ],
            "Resource": "*"
        }
    ]
}
```

- Version은 정책의 버전

- Effect는 허용의 목적인지 거부의 목적인지?

- Action은 행위에 대한 것을 의미 S3 읽기 권한이란 그런 내용

- Resource는

### 계정 관리를 통한 접근 제어 모범 사례는?

### 필요한 리소스에 대한 접근만 허용하는 방법

### 많은 계정을 관리하는 좋은 방법
